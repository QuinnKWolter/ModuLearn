{% comment %}
Reusable Tailwind-styled Django form renderer.
Usage: {% include 'includes/tailwind_form.html' with form=my_form %}
Requires: {% load tailwind_filters %} in the parent template.
{% endcomment %}
{% load tailwind_filters %}
{% if form.non_field_errors %}
  <div class="alert alert-danger mb-4" role="alert">
    {% for error in form.non_field_errors %}
      <p class="mb-0">{{ error }}</p>
    {% endfor %}
  </div>
{% endif %}
{% for field in form %}
  {% if field.is_hidden %}
    {{ field }}
  {% else %}
    <div class="mb-4">
      {% if field.field.widget.input_type == 'checkbox' %}
        <div class="flex items-center gap-2">
          {{ field|tw_input }}
          <label for="{{ field.id_for_label }}" class="text-sm font-medium text-gray-700 dark:text-gray-300">{{ field.label }}</label>
        </div>
      {% else %}
        {% if field.label %}
          <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}{% if field.field.required %} <span class="text-red-500">*</span>{% endif %}</label>
        {% endif %}
        {{ field|tw_input }}
      {% endif %}
      {% if field.help_text %}<p class="form-text">{{ field.help_text|safe }}</p>{% endif %}
      {% for error in field.errors %}
        <p class="invalid-feedback" style="display:block;">{{ error }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endfor %}
