<!-- Modern Mastery Grid -->
<div>
    <div class="card overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <div class="rounded-full p-2 mr-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <i class="fas fa-th text-white"></i>
                    </div>
                    <div>
                        <div class="flex items-center gap-2">
                            <h4 class="mb-1 font-bold" id="viewTitle">Mastery Grid</h4>
                            <button type="button" id="classAverageHelpBtn" class="btn btn-outline-secondary btn-sm rounded-full p-0 px-2 hidden" data-bs-toggle="modal" data-bs-target="#classAverageHelpModal" aria-label="Class Average Help" title="Class Average Help">?</button>
                            <button type="button" id="perStudentHelpBtn" class="btn btn-outline-secondary btn-sm rounded-full p-0 px-2 hidden" data-bs-toggle="modal" data-bs-target="#perStudentHelpModal" aria-label="Per Student Help" title="Per Student Help">?</button>
                        </div>
                        <p class="text-gray-500 dark:text-gray-400 mb-0" id="viewDescription">Click any cell to view detailed progress</p>
                    </div>
                </div>
                <div class="flex gap-2">
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="viewMode" id="classAverage" value="classAverage">
                        <label class="btn btn-outline-success inline-flex items-center gap-2" for="classAverage">
                            <i class="fas fa-users mr-1"></i>Class Average
                        </label>
                        <input type="radio" class="btn-check" name="viewMode" id="perStudent" value="perStudent">
                        <label class="btn btn-outline-primary inline-flex items-center gap-2 ml-2" for="perStudent">
                            <i class="fas fa-list mr-1"></i>Per Student
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="p-0">
            <!-- Mastery Grid View -->
            <div class="overflow-x-auto">
                <table class="table mb-0 custom-table" id="masteryGrid">
                    <thead>
                        <tr id="gridHeaders">
                            <th class="border-0 font-bold py-2 text-center" style="min-width: 250px;">
                                <div class="flex flex-col items-center">
                                    <i class="fas fa-graduation-cap text-blue-600 mb-1"></i>
                                    Topics
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="gridBody">
                        <!-- Dynamic grid content will be inserted here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Per Student View - Hidden by default, content will be swapped in -->
            <div id="perStudentContent" style="display: none;">
                <div class="overflow-x-auto" style="width: 50%; margin: 0 auto;">
                    <table class="table table-hover mb-0 custom-table" id="studentTable">
                        <thead>
                            <tr>
                                <th class="border-0 font-bold py-1 text-center">
                                    <div class="flex flex-col items-center">
                                        <i class="fas fa-user-graduate text-blue-600 mb-1" style="font-size: 0.8rem;"></i>
                                        <span style="font-size: 0.8rem;">Student ID</span>
                                    </div>
                                </th>
                                <th class="border-0 font-bold py-1 text-center">
                                    <div class="flex flex-col items-center">
                                        <i class="fas fa-chart-line text-blue-600 mb-1" style="font-size: 0.8rem;"></i>
                                        <span style="font-size: 0.8rem;">Overall Progress</span>
                                    </div>
                                </th>
                                <th class="border-0 font-bold py-1 text-center">
                                    <div class="flex flex-col items-center">
                                        <i class="fas fa-book text-blue-600 mb-1" style="font-size: 0.8rem;"></i>
                                        <span style="font-size: 0.8rem;">Topics Completed</span>
                                    </div>
                                </th>
                                <th class="border-0 font-bold py-1 text-center">
                                    <div class="flex flex-col items-center">
                                        <i class="fas fa-chart-bar text-blue-600 mb-1" style="font-size: 0.8rem;"></i>
                                        <span style="font-size: 0.8rem;">Analytics</span>
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="studentTableBody">
                            <!-- Dynamic student rows will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
