{% if legacy_groups %}
<section class="mb-8">
  <div class="card overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-100 dark:border-gray-700">
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-3">
        <div>
          <h2 class="text-lg font-semibold mb-0.5">Legacy Courses (MasteryGrids)</h2>
          <p class="text-sm text-gray-500 dark:text-gray-400">{{ legacy_groups|length }} course{{ legacy_groups|length|pluralize }} available</p>
        </div>
        <div class="flex items-center gap-2 w-full md:w-auto md:max-w-sm">
          <div class="relative flex-1">
            <i class="bi bi-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
            <input type="text" class="form-control pl-9" id="legacyGroupsSearch" placeholder="Search courses...">
          </div>
          <button class="btn btn-sm btn-outline-secondary hidden" id="clearLegacySearch">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="p-6">
      <div class="legacy-groups-container max-h-[500px] overflow-y-auto">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3" id="legacyGroupsContainer">
          {% for group in legacy_groups %}
          <div class="legacy-group-card" data-group-name="{{ group.group_name|lower }}" data-group-login="{{ group.group_login|lower }}">
            <div class="card border border-gray-200 dark:border-gray-700 h-full flex flex-col p-4">
              <h6 class="font-semibold mb-2">{{ group.group_name }}</h6>
              <div class="flex-1 mb-3">
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">
                  <span class="font-medium">Group ID:</span> <code class="text-xs bg-gray-100 dark:bg-gray-700 px-1 rounded">{{ group.group_login }}</code>
                </p>
                {% if group.course_ids %}
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-0">
                  <span class="font-medium">Course IDs:</span> {{ group.course_ids|join:", " }}
                </p>
                {% endif %}
              </div>
              <div class="flex flex-col gap-2 mt-auto">
                <a href="{% url 'dashboard:legacy_dashboard' %}?grp={{ group.group_login }}" class="btn btn-sm btn-primary w-full">
                  <i class="bi bi-graph-up-arrow mr-1"></i>View Dashboard
                </a>
                {% if group.course_ids %}
                <button type="button"
                        class="btn btn-sm btn-outline-primary w-full"
                        data-group-login="{{ group.group_login }}"
                        data-group-name="{{ group.group_name }}"
                        onclick="openCourseResourcesModal('{{ group.group_login }}', '{{ group.group_name|escapejs }}')">
                  <i class="bi bi-folder mr-1"></i>View Resources
                </button>
                {% endif %}
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
        <div id="legacyGroupsEmpty" class="hidden text-center py-12">
          <i class="bi bi-search text-gray-300 dark:text-gray-600 text-4xl"></i>
          <p class="text-gray-400 mt-3">No courses match your search</p>
        </div>
      </div>
    </div>
  </div>
</section>
{% endif %}
