{% extends 'base.html' %}
{% load static %}

{% block title %}Learning Analytics Dashboard - ModuLearn{% endblock %}

{% block content %}
<div class="container-fluid py-2 py-md-4">

    {% include 'dashboard/components/legacy_dashboard_header.html' %}

    <!-- Dashboard Content Area (Hidden until data is loaded) -->
    <div id="dashboardContent" class="d-none">
        {% include 'dashboard/components/dashboard_kpi_cards.html' %}
        {% include 'dashboard/components/dashboard_mastery_grid.html' %}
    </div>
                        
    {% include 'dashboard/components/dashboard_modals.html' %}

</div>
{% endblock %}

{% block extra_css %}
{% include 'dashboard/components/dashboard_styles.html' %}
{% endblock %}

{% block extra_js %}
{{ auto_groups|json_script:"auto-groups-data" }}
<script>
    // Pass auto_groups from backend to frontend JavaScript (already fetched via direct DB query)
    const autoGroupsElement = document.getElementById('auto-groups-data');
    window.autoGroups = autoGroupsElement ? JSON.parse(autoGroupsElement.textContent) : [];
    // Pass preselected group ID from GET parameter
    window.preselectedGroup = "{{ preselected_group|escapejs }}";
</script>
{% include 'dashboard/components/dashboard_scripts.html' %}
{% endblock %}

